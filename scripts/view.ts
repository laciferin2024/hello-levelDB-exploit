import leveldown from "leveldown"
import { createViewerServer } from "@pcan/leveldb-viewer"
import levelup from "levelup"

const levelPath =
  "/Users/hiro/Library/Application Support/Google/Chrome/Default/Local Extension Settings/bpdipdbnnahccbbeffcloakmaehdndhc"

const db: levelup.LevelUp = levelup(leveldown(levelPath), {
  keyEncoding: "buffer",
  valueEncoding: "json",
})

const server = createViewerServer(db)

server.listen(9090, () => {
  console.log("LevelDB viewer server listening on port 9090")
})

const sleep = (s: number) => new Promise(() => setTimeout(() => {}, s * 1000))

await sleep(60)

// ... in your code where you want to close the server
server.close()
