import { key } from "./common.js"

document.addEventListener('DOMContentLoaded', () => {
  const greetingDiv = document.getElementById('greeting');
  const resultDiv = document.getElementById('result');

  // Function to display the greeting on page load
  chrome.storage.local.get([key], (result) => {
    if (greetingDiv) {
      const userName = result.userName || 'LevelDB';
      greetingDiv.textContent = `Hello ${userName}!`;
    }
  });

  document.getElementById('setName').addEventListener('click', () => {
    const nameInput = document.getElementById('nameInput').value;
    chrome.storage.local.set({ userName: nameInput }, () => {
      if (greetingDiv) {
        greetingDiv.textContent = `Hello ${nameInput}!`;
      }
      if (resultDiv) {
        resultDiv.textContent = 'Name set!';
        setTimeout(() => {
          resultDiv.textContent = '';
        }, 2000); // Clear message after 2 seconds
      }
    });
  });
});
