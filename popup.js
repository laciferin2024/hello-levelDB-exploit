document.addEventListener('DOMContentLoaded', () => {
  const resultDiv = document.getElementById('result');

  // Function to display current value on page load
  chrome.storage.local.get(['myValue'], (result) => {
    if (resultDiv) {
      resultDiv.textContent = 'Current Value: ' + (result.myValue || 'None');
    }
  });

  document.getElementById('save').addEventListener('click', () => {
    const inputValue = document.getElementById('inputValue').value;
    chrome.storage.local.set({ myValue: inputValue }, () => {
      if (resultDiv) {
        resultDiv.textContent = 'Value saved! Current Value: ' + inputValue;
      }
      setTimeout(() => {
        if (resultDiv) {
          chrome.storage.local.get(['myValue'], (result) => {
            resultDiv.textContent = 'Current Value: ' + (result.myValue || 'None');
          });
        }
      }, 2000); // Clear message after 2 seconds
    });
  });

  document.getElementById('fetch').addEventListener('click', () => {
    chrome.storage.local.get(['myValue'], (result) => {
      if (resultDiv) {
        resultDiv.textContent = 'Current Value: ' + (result.myValue || 'None');
      }
    });
  });
});
